http://h3chz24-svn/PON-CODE/CM/branches_bugfix/NV202311160013

[‎2023/‎12/‎26 9:15] liujingwang (PON交换机产品开发部, CTPL):

[新员工第一天（可按照第一封邮件指导执行）](onenote://h3chznt02/高端交换机/S10500-V7/03.经验总结/软件/PUBLIC/OneNote/CCLSW/SF/PON/新员工.one#新员工第一天（可按照第一封邮件指导执行）&section-id={9555E696-8B98-4958-A624-572AB30CF3A6}&page-id={E8FF5B02-5F28-48C9-AD61-F6C7431243AA}&end)

已保存此对话。不久，您将在 Skype for Business 中的“对话”选项卡上和 Outlook 的“对话历史记录”文件夹中看到它。

[‎2023/‎12/‎26 9:39] liujingwang (PON交换机产品开发部, CTPL):

\\h3chznt02\高端交换机\PON\03.经验总结\软件\00.新员工\李勇杰

\\h3chznt02\高端交换机\PON\03.经验总结\软件\00.新员工\杨霖

这两个学习总结也可以参考

[‎2023/‎12/‎26 9:40] chendakeng (CTPL):

好的，多谢

[‎2023/‎12/‎26 9:42] liujingwang (PON交换机产品开发部, CTPL):

你工号发我下，我给你开下编译服务器权限

[‎2023/‎12/‎26 9:42] chendakeng (CTPL):

c27216

[‎2023/‎12/‎26 9:45] liujingwang (PON交换机产品开发部, CTPL):

10.99.213.70    10.99.213.71  10.99.213.155  账号密码都是c27216

三台编译服务器对应不同sdk，后续看你投哪款，到时再问我就行

[‎2023/‎12/‎26 9:46] chendakeng (CTPL):

好的

file://VYHZ-M19192AY/liushuai


[‎2024/‎3/‎8 17:21] linchaowei (CTPL):

typedef enum {

        XMCS_IF_WAN_DETECT_MODE_AUTO = 0,

        XMCS_IF_WAN_DETECT_MODE_GPON,

        XMCS_IF_WAN_DETECT_MODE_EPON,

        XMCS_IF_WAN_DETECT_MODE_10G_1G_EPON,

        XMCS_IF_WAN_DETECT_MODE_10G_10G_EPON,

        XMCS_IF_WAN_DETECT_MODE_1G_1G_EPON,

        XMCS_IF_WAN_DETECT_MODE_XGPON,

    XMCS_IF_WAN_DETECT_MODE_XGSPON,

    XMCS_IF_WAN_DETECT_MODE_NGPON2_10G_10G,

    XMCS_IF_WAN_DETECT_MODE_NGPON2_10G_2G,

    XMCS_IF_WAN_DETECT_MODE_NGPON2_2G_2G,

        /*add new mode above this line!*/

        XMCS_IF_WAN_DETECT_MODE_MAX,

} XMCSIF_WanDetectionMode_t ;

xmcs_if.h  trunk\mtk\global_inc\modules\xpon_global\public   7771 2024/2/5       

# tcapi show xpon

OID [129:1][XPON]:

        OID [130:1][Common]:

                [phyStatus = gpon_phy_up]

                [trafficStatus = up]

                [startXpon = No]

                [CfgLoading = Done]

                [GponBindIfc = Yes]

        OID [131:1][LinkCfg]:

                [Mode = 7]

                [LinkSta = 0]

        OID [132:1][TR069]:

        OID [133:1][VOICE]:

        OID [134:1][IPHost1]:

        OID [135:1][IPHost2]:

#  

[‎2024/‎3/‎8 17:23] linchaowei (CTPL):

# sys onumode s

Bad command!

Usage:sys onuMode auto_mode|gpon|xepon_1g|xepon_asy|xepon_sym|xgpon|xgspon


#!/bin/sh

/userfs/bin/tcapi set InfoVoIP_Common SC_START_STATUS "No"
/userfs/bin/tcapi set InfoVoIPH248_Common START_STATUS "No"
usr/bin/killall sipclient 2>/dev/null
usr/bin/killall mgapp 2>/dev/null
usr/bin/killall tcVoIPApiServer 2>/dev/null
usr/bin/killall -9 sipclient 2>/dev/null
usr/bin/killall -9 mgapp 2>/dev/null
usr/bin/killall -9 tcVoIPApiServer 2>/dev/null
/bin/rm -f /var/run/voip_sip.pid
sleep 3
rmmod pcmDump
rmmod ovdsp
rmmod foip
rmmod acodec_ext
rmmod acodec_x
rmmod ortp
rmmod ksocket
rmmod slic3
rmmod slic3_silicon
rmmod slic3_intel
rmmod fxs3
rmmod fxs3_silicon
rmmod spi
rmmod lec
rmmod pcm1
rmmod DSPCore
rmmod sys_mod

-------------第二季度---------------
问题单：
1、dis alarm走单
2、jtag打印堆栈
3、实际功率显示
4、一键收集收发包统计信息（网卡：cat /proc/ixgbe/0.0 summary
	                           ieth软件收发：dis hardware ieth static
		           ipc/ibd：dis hardware ipc statistics lip/cat /proc/ibd(ipc)/stats）
5、cat/proc/bootware/update-with-btw 命令优化
6、五个问题单帮忙给内核提5个单子吧：内核王冰磊
7、想增加一个功能，Blackbox_RecordDetail， 基础信息还是和原流程一样，详细信息记录到本地emmc文件blackbox_modid.log（不考虑mips）
ULONG BLACKBOX_Record
(
     IN UINT uiMod,
     IN UINT uiInfo,
     IN UINT uiIndex
     IN const CHAR *pcDetail
) 
现在ECC错误的历史详细信息是记录的日志文件，时间久了就对不上了 
[‎2022/‎5/‎11 11:18] zhangxin (CR, CTPL): 
还要做一下命令行，评估一下工作量
能够显示emmc文件，还有调用地方的配合修改
8、请驱动合入通过iic读取8004b电源砖功耗的功能
9、【CR B75D071SP维护分支】8004B适配修改GDDR

同步问题单：
1、ieth打印D054同步
2、jtag打印堆栈D054同步
3、实际功率显示D071sp同步
4、cat/proc/bootware/update-with-btw 命令优化
5、想增加一个功能，Blackbox_RecordDetail， 基础信息还是和原流程一样，详细信息记录到本地emmc文件blackbox_modid.log（不考虑mips）
6、请驱动合入通过iic读取8004b电源砖功耗的功能

其他：
1、学习tcl脚本使用
2、调试8004b功率芯片
3、调试lpua的bootware验证drv_log生成
4、代码鉴定


202111200802【CR B75分支】【一级问题同步】【同步202106160568】【无线产品B64D029SP维护分支】【B64D029SP44】【WA5300】【开发提单】secondary_log_buf增强健壮性，WA5300系列增加secondary_log_buf to OS


-------------第三季度---------------
1、实时功率问题单项目
2、可维护信息emmc持久化问题单项目
3、主备倒换功率模块打印断言
4、优化ieth命令
5、忽略配套检查
6、查看电源管理详细信息显示不全
7、飞腾扣板线卡调试
8、代码鉴定
9、请陈达铿帮忙配合OS验证下吧，多谢//转发: xlp sdk bug知会，请各位主送领导提供xlp活跃分支版本以及cpu款型
用c04101b这个电脑连设备
10、8004+flexe子卡换插为CQ18B线卡后，读取温度信息异常，会多出3个感温点信息


补丁
dis hardware adm1166 blackbox 
adm1166_ShowBlackBox：
MDEV_ADDR_DECLARE(stMdevAddr, MDEV_ID_ADM1166, usPhySlot, usSubSlot, 0, 0);((UCHAR *)&uiNum)[0] = 'o'; ((UCHAR *)&uiNum)[1] = 'k';((UCHAR *)&uiNum)[2] = 0; syslog2(LOG_MAKEPRI_WITHTYPE(LOG_LOG, 0, LOG_WARNING), (UCHAR *)&uiNum, (UCHAR *)&uiNum, (UCHAR *)&uiNum);  

/var/mntclib-old-hz/V7R1_B75D054SP_CR/trunk/20230207025558590/
1、电源提供接口、功率进行动作
2、获取关断电源数
3、一次只关闭一个电源，定时器实现
4、增加shut状态

1、先支持18K和19020/19020MC
2、关断动作由功率管理发起，关断状态变化电源管理反向通知，电源管理支持查询当前关断数
3、电源状态error，增加一个shut标记，显示和返回平台状态，做特殊处理
4、功率管理，把uiTotal，改成uiActive，增加uiShut (uiStandby）

[‎2022/‎11/‎17 17:43] zhangxin (CR, CTPL): 
遗留问题：
1、关断之后，告警灯亮
2、平台的状态，和实际不完全一致（如果要支持，可能需要平台配合）
[‎2022/‎11/‎17 17:45] zhangxin (CR, CTPL): 
InPower，在关断情况下或者输出功率为0是，显示为“--”
平台状态normal

\\h3cbjnt05-fs\路由器\核心路由器\版本库\Temp\sunhongshan

定位时在kdb中可以通过prdump dlog-pwrm memlog看pwrm的memlog


在这第一季度期间我完成了一个新的需求，总结输出了一篇技术性文档，处理了多个主线和分支的问题单。
Kansan使用总结：kasan是linux内核4.9.0开始新增的一种动态内存安全错误检测工具，主要功能是检查内存越界访问和使用已释放内存的问题。在编译版本时可以使用已经打开kasan功能的lib文件，这样打包出来的ipe文件在设备上加载的过程中会自动检查代码中涉及内存访问的地方，并将出现错误的地方将调试信息输出在终端上，方便我们快速的定位问题。通过两周的学习，我将kasan的工作原理，以及对应的测试用例和实际环境下如何使用操作写成一遍技术文档方便大家查阅使用。在编写文档的过程中我对linux内核的基础知识有了更加深入的理解，特别是对于内存分配这块内容有了新的认识。

ieth端口prdump命令编写：prdump命令作为一种可维护手段，通过读写/proc文件系统实现与内核中的实体进行通信，获取或者修改内核信息。单板的内部以太网口在/proc目录下也有对应的文件，根据不同的网卡类型分别对应igb、ixgbe和i40e三个文件，在已有的命令中支持通过/proc接口查看网卡端口的链路状态，收发信息以及修改查看网卡内部的寄存机。内部网口是cpu发送指令的重要通道，需要经常查看网口的工作状态，检查网口的各项功能是否能正常运行。每次切换网卡的工作模式都需要根据供应商提供的数据手册修改内部寄存器的值，而且修改的寄存器不止一处且还需要注意修改顺序。考虑到实现的复杂度和时间成本，决定对igb、ixgbe和i40e端口新增up/down，hwinfo和lpmode/lpexit几个常用的prdump可维护命令，这样通过prdump可维护命令可以轻松实现端口链路的up/down状态、进入和退出端口的环回模式以及查看网卡的mac和phy的硬件信息。命令编写的过程中遇到了许多问题，如命令不起作用、down掉的链路自动up等，但最终都通过查阅资料和请教师傅成功解决，这些工作让我在软件上初步了解/proc虚拟文件系统的工作原理同时在硬件上学习到了许多网卡工作相关的原理。

问题单解决：日常工作的内容主要分为项目开发和问题单处理，在第一季度期间我总共处理了6个问题单和7个同步问题单。范围涉及告警、断言、时间显示、KDB和掉电等内容。告警缺失是我处理的第一个问题单，也是我第一次接触与内核态相关的代码，最终在师傅的指导下在上万的代码文件中从电压模块开始厘清程序的调用流程，期间查阅前辈们在wiki上有关告警模块的经验分享，最终定位问题所在。不同的问题单通常对应代码中不同的模块，通过处理各种不同问题的问题单让我快速的熟悉整体项目代码的结构、规范以及处理问题单需要经过的提单、定位、修改、评审、测试和归档的一条龙流程。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下基本完成了第一季度的工作目标，完成转正考核，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的第二季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。


在第二季度期间我完成了几个新的需求，第一次参与代码鉴定，处理了多个主线和分支的问题单，协助验证4.4内核新增功能，接收netconf差异化排查等工作。

几个新的需求：在第二季度中我一共实现了一下几个新增需求：1、优化功率显示命令，在命令输出中增加实际功率显示；2、blackbox详细信息记录emmc；3、支持命令行显示特定的kque/fifo、支持命令行显示本次启动的dmesg。三个新增需求都涉及到命令相关的处理，让我对命令行在用户态的处理过程有了更加深刻的理解。其中增加实际功率的显示是一个代码量修改超过300行的单个需求，其中的修改涉及多个.c文件，在实现该需求的过程中我全面理清了功率读取命令行从用户态下发到内核态，以及内核态中功率管理模块是如何通过iic协议读取功率芯片寄存器值，最后根据对应的芯片手册将寄存器值换算成对应的物理量从而计算出实时功率这一过程。由于涉及的修改较多，在需求实现的过程中遇到了许多困难，这也让我明白了理解程序底层逻辑架构的重要性。

问题单解决：在第二季度期间我处理了多个问题单和同步问题单。范围涉及iic芯片的注册选通、bootware更新、jtag打印等内容。每一个问题单通常对应代码中不同的模块，但是通过处理问题单也是让我快速了解代码各个模块功能特性的最快途径。

协助验证4.4内核新增功能和代码鉴定：为了增加4.4内核的维护和调试信息，给OS部门的同事提了5个问题单同时协助OS部门的同事顺利在设备上验证功能。在该季度的工作中我还第一次参与了代码鉴定的工作，第一次鉴定超过5k的代码量让我在重新学习代码编程规范的同时也意识到它在实际工作中的重要性。

netconf差异化排查：由于人力不足的原因我临时接受了这项工作，在对netconf一无所知的情况下，我学习了公司的视频课程并到网上收集相关资料，在开展工作前对netconf协议和yang协议有了基础的了解。在排查过程中我使用netconf工具对支持涉及的yang文件进行细致的排查，对照press网站一个一个节点的排查，遇到难以排查的节点与组长和同事一起讨论。多亏组长对我工作的支持，我才能在规定时间内完成该项工作。虽然这项工作的工作来的比较突然，工作量超出预期而且时间也比较紧迫，但是通过完成这项任务我了解了许多新的命令，了解了cr设备的许多特性功能，同时学习了一些新的知识也锻炼了我处理紧急任务的能力，是一次宝贵的成长经验。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第二季度的工作目标，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的第三季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。
在第三季度期间我完成了几个新的需求，第一次在isoft上走完项目流程，处理了多个主线和分支的问题单，协助os验证4.4内核新增功能，学习飞腾扣板的项目材料。

两个问题单项目：在第三季度中我一共完成了两个问题单项目：1、优化功率显示命令，在命令输出中增加实际功率显示；2、可维护信息emmc持久化；这两个问题单的代码修改量都超过300行，需要走问题单项目流程才能将代码合入。通过处理这两个问题单项目
我熟悉了项目处理的完整流程，了解了在项目中各个节点需要完成那些目标。从目标制定，到工作评审，到代码编写评审，再到系统测试，到最后完成验收，在同事和师傅的帮助下顺利下行项目的每一个节点。有了第一个项目经验作为基础，在处理第二个项目流程时就相对顺利了许多，大多数步骤都由我一个人独自完成。每完成一个项目不仅能提升代码框架的设计能力，同时从对项目整体流程的把握来说对于培养自身对时间的掌控也有非常大的帮助。

问题单解决：在第三季度期间我处理了多个问题单和同步问题单。问题单内容包括优化ieth显示命令、查看电源显示信息、处理温度异常等。每一个问题单通常对应代码中不同的模块，但是通过处理问题单也是让我快速了解代码各个模块功能特性的最快途径。

飞腾扣板项目的学习：飞腾扣板是飞腾d2000处理器和come扣板的结合，也是cr产品首次引入基于arm架构的处理器。通过对飞腾主控项目任务书的学习，我了解调试单板的主要几个步骤。从让单板正常运行的角度来说，要让设备正常启动，最重要的就是保证cpu和周围设备的正常通信，所以在调试设备的过程中对于各类总线的适配显的尤为重要，其中i2c和pcie的调试更是重中之重。平时在处理问题单时比较少接触这类与硬件强相关的代码，希望这次借着调试线卡的机会能对相关代码有更深入的了解。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第三季度的工作目标，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的第四季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。


在第四季度期间我完成了一个问题单项目、一个特性开发、处理各分支问题单、补丁制作等工作。

电源关断特性开发：电源关断特性是属于节能项目的一环，主要是为了响应国家的节能减排战略，降低设备的能源
消耗。该特性的主要功能是实现设备再正常运行状态下关断多余的电源，在必要时开启以实现设备电源的动态调整。虽然该特性的代码量不是很大，但是由于涉及到对电源的操作，所以在编码前做了充分的工作分析，细化工作量。在这次的特新开发过程中，我学会了怎么在编码初期从方案分析，到工作量细化到转化为具体代码的过程，让我的工作能力进一步得到提升。同时该特性的开发工作也加深了我对电源管理和功率管理模块的理解。

问题单项目和问题单解决：在第四季度期间我处理了多个问题单和一个问题单项目。其中问题单项目的内容是增加ipc-ibd报文的crc验证功能，我主要的工作内容是为项目走流程并验证功能。虽然没有参与编码过程，但是通过熟悉代码流程和本地环境验证，我对ipc控制通道有了进一步地了解；在问题单上有需求，也有缺陷。在需求上主要涉及trap告警和np切换，缺陷方面涉及死循环监控和功率管理。通过处理各类问题单，不仅加快我对系统各个模块的了解，也增加了我问题池的深度从而提升了我排查问题的能力。

补丁验证：d054sp版本补丁制作，由于第一次制作补丁在补丁指导书和组内同事的协助下及时的生成补丁帮助测试同事完成补丁验证，过程虽然不是很顺利但是也是一次宝贵的学习经验。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第四季度的工作目标，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。

---------------------------------------------2023--------------------------------------------------

-------------第一季度---------------
问题单：
1、【CR B75D071SP维护分支】【集群】【可维护】display hardware internal dmesg命令显示不全
2、【CR B75D071SP维护分支】【微动开关】请关闭当前的线卡微动开关
3、【CR B75D071SP维护分支】从11.18号kasan版本换到11.30号release版本，主控进kdb
4、【CR B75D071SP维护分支】请优化单板启动类型，新增规避重启类型。
5、【CR B75分支】8004B线卡带子卡时，显示的实际功耗使用值大于额定功耗值
6、【CR B75D071移动分支】【TB202208100001】【节能规范专项2nd】undo power-supply policy priority不在位板卡，dis power-supply verbose中显示的Priority为5(5) 而初始时是0(0) 
7、【CR B75D071SP维护分支】命令set hardware internal mon record flush chassis 1加上框号后执行失败
8、【CR B75D071移动分支】【TB202208100001】【开发提单】板卡异常重启后，上传到主控的secondary_log_buf内容不全
9、【CR B75D071移动分支】【TB202208100001】请在display power-supply verbose中增加一列显示单板电压

特性开发：
电源节能专项测试配合

移动节能mib适配

在第一季度期间我主要是配合电源关断特性专项测试、移动mib节能适配联调、处理各分支问题单等工作。

电源关断特性专项测试：电源关断特性是属于节能项目的一环，即使在编码前做了充分的工作分析，细化工作量。在这次的专项测试过程中依然出现了许多问题，虽然没有重大的功能性问题，但是测试同学凭借测试经验依旧提出许多宝贵的修改意见。通过这次专项测试，不仅修改了改项目特性暴露的一些问题，使得改功能更加完善稳定，同时也学会了让我从测试的角度去看问题，去发现问题，让我的工作能力进一步得到提升。最后也进一步加深了我对电源管理和功率管理模块的理解。

移动mib节能适配联调：移动mib是我紧急接手的项目，同时也是一个和平台联调的项目。刚接手改任务时，我对mib并不了解，从mib软件安装，对设备进行snmp设置，再到熟悉代码中与平台对接的代码接口。一步步熟悉和学习mib相关的内容，最后终于及时实现新增的mib节点功能，成功获取节点所需的数据。在联调的过程中也遇到了各种问题，有应为路径原因导致ci版本不生效，也有因为平台下发的过程中字节序的问题导致mib结果获取失败，还有在排查过程中发现遗漏的适配节点以及对实现方式合理性的探讨。总之通过这次的联调不仅学习了mib相关知识，还增强了自身团队协作的能力，在联调中解决问题的同时也锻炼了自己的沟通能力。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第一季度的工作目标，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。
-------------第二季度---------------
1、【CR B75分支】【内存优化】请优化MPU20C主控内部网口初始化占用内存过多的现象。
2、【CR B75D071SP维护分支】【同步】【同步202303090607】【CR B75D046SP维护分支】【可维护】【岳阳电信】针对cpu冷复位导致secondary_log_buf信息被刷，需要用其它手段可以记录异常信息
3、【CRB75TRUNK】【同步202304210058】【CR B75D071SP维护分支】双输入电源需要显示5个版本信息，需要适配
4、【CRB75TRUNK】【驱动】多框集群，CQ12F插在2框，更换4月21号的D082 bugfix版本，该线卡kdb
5、【CRB75TRUNK】【功耗测试】请将各单板按照测试的最大功耗，合入主线分支

项目特性：
1、双输入电源在线升级，与厂家讨论，工作量大
2、mcelog联调
3、驱动、内核命令行特性

http://10.153.120.111/Leopard-SOFT-OS-code/V7R1_B75D071SP/branches_bugfix/COMWAREV700R001B75D071SP12/TB202304190360/kernel_4.4 

EXCEPTION_MCE
 
typedef void (*driver_mce_pf) (void *mce_data, int mce_size); 

@陈达铿，有个小特性你投入实现下吧：不更新ipe情况下修改内核cmdline。内核cmdline在mips的rmi.c和x86的cmdline.c中，启动时bootware传给os，如果发生变化，需要重新编译版本，使用不方便。对于线卡，我们可以通过comware的命令行新增、修改、删除内核cmdline，线卡启动时通过gdsync从主控获取到变化的cmdline，在loader中解析后传给os，完成更新。

- 对于主控，我们看是不是可用高端内存
- 新增cmdline可能好实现，修改和删除得再考虑

工作量不小

在第二季度期间我主要工作内容是电源关断特性主线移植、双输入电源在线升级功能、mcelog联调、处理各分支问题单等。

双输入电源在线升级功能：双输入电源升级功能是我接手的第二个有关电源的特性开发，由于核达电源和长城电源在运行过程中出现不均流现象以及读取fault-log失败的问题，经过电源部门和电源厂家定位发现是电源内部问题需要进行固件升级。为了方便对所有的双输入电源进行固件升级，就需要用到已有的电源升级命令。但是发现该命令只适配了核达的单输入电源，而且命令使用场景太少，代码常年缺少维护，在适配过程中问题不断。核达双输入电源的升级步骤，指令与单输入电源相同，在和厂家探讨后，在原有的基础上稍作修改就完成对核达双输入电源升级功能的适配。问题的重点在长城的双输入电源，到手的资料只有一份厂家给的有关电源升级步骤及相关指令的文档。文档专业用语较多，解读难度很大，在和厂家经过多次邮件和会议交流后才完全读懂该文档的全部内容。但是调试的过程却并非一帆风顺，根据升级手册，在第一步读取电源内部信息就阻塞了，在经过多次在线沟通交流后厂家决定派遣专家到公司现场配合工作。由于是第一次与其他公司的员工线下配合工作，事前还是略有紧张，但是结果证明我的担忧是多余的。对方的工作人员非常的专业，沟通上毫无障碍，配合的过程十分顺利，我们根据升级步骤一步步调试，一点点的定位并解决问题。通过多次对电源通信信号的抓波，分析i2c传输总线上的每一个数据，最终发现升级失败的一个个原因。主要是数据长度，指令冲突，传输协议不规范几个原因，这些都是前期没有和厂商协商到位产生的结果。通过这个特性开发，不仅通过支持电源的在线升级功能，加深了我对电源管理模块的理解，也增加了我的工程经验以及对外交流配合的经验，是一次不可多得的宝贵经历。

mcelog联调：mcelog是为了记录，硬件产生的错误。由于os临时改变方案，导致该项目时间比较紧迫。这个项目需要驱动、平台和os三方联调，驱动需要改动的地方相对简单，但是项目过程需要配合平台同学进行验证。需要确保错误发生的时候将数据记录下来，调用的时候成功传出数据。最后经过和平台同学的协力合作，终于在规定时间将代码合入，确保鉴定时间不因为该项目延期。虽然在本地验证成功了，但是在专项测试的过程中仍然出现了问题，mce错误出现了但是却没有正常记录到nvram之中，最后经过问题的定位是由于错误发生的时机太早，记录错误的函数还未注册导致信息没有记录下来。总之通过这次的联调不仅学习了mce相关知识，还增强了自身团队协作的能力，在联调中解决问题的同时也锻炼了自己的沟通能力。

电源关断特性主线移植和问题单处理：本季度的工作还包括电源关断特性移植主线并走了一个移植项目流程，在问题单处理上还涉及kdb，内存优化，功率调整的等内容。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第二季度的工作目标，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。

-------------第三季度---------------

1、cmdline动态修改特性，工作量大
2、rx8800包装项目，紧急
3、mce信息处理，翻译原始数据并咨询英特尔fae
4、电源关断特性优化相关问题单
5、打补丁
6、适配集群口光模块命令
[‎2023/‎9/‎19 10:15] chendakeng (CTPL): 
哥我们的设备支持xfp吗
[‎2023/‎9/‎19 10:15] dengshien (CTPL): 
集群口不支持
[‎2023/‎9/‎19 9:33] chendakeng (CTPL): 
zhao工，我们目前只支持10g的光模块，这个速率的模块有哪几个区域，每个区域有多少页
[‎2023/‎9/‎19 9:44] zhaobinnan ys44510 (CW, RD): 
这个速率有sfp模块和xfp模块，sfp模块取A0和A2区域的低128字节，xfp模块取page0 的低128字节， page 01的高128字节

问题单：
1、【CRB75TRUNK】【GOLD】执行colinfo-mon脚本失败  返回错误信息
2、【CR B75分支】【驱动交换】驱动交换告警日志需要优化



问题单号	202309121990 	当前处理者	chenfeihu 04101 
简要描述	【CRB75D086SP维护分支】【V300R008】【MPU08D】【系统测试】MPU08D-G 集群控制口-- 光口查询，相对于线卡业务口的查询命令，驱动对主控集群口做的命令较少，无法查询光模块原始厂家和型号； 
 
参考已有的命令，增加brief, information, register。
分别对应IOCTL_COMMON_FIBER_GET_BRIEFINFO、IOCTL_COMMON_FIBER_GET_INFO_DETAIL、IOCTL_COMMON_FIBER_GET_REGS_DETAIL
代码可以参考 drv_optmod_Dump 、optmod_cmd.c

需要同步资料 
新走了个单子给你



试下下面的修改看能否解决

- 思路：pwrm shut完后，对shut成功的电源，直接先标记 bValid为false，并更新 uiActive，后续 PWRM_SourceRemove时如果已经!bValid，则不再更新uiActive
- 修改 `POWER_ShutDown` 原型为 `UINT POWER_ShutDown(IN UINT uiNum, OUT UINT auiIndex[])`，返回值为实际shut掉的电源数目，auiIndex保存所有shut掉电源的索引
- pwrm_CheckPowerProc 中调用 `POWER_ShutDown` 后，如果返回值不为0，使用输出的auiIndex[0]，调用新增的 VOID PWRM_SourceRemovePre(IN UINT uiIndex)
- 新增的 PWRM_SourceRemovePre中，检查index对应的source如果valid，则标记未不valid，并更新uiActive
- PWRM_SourceRemove中，检查source如果valid，才uiActive和valid

[‎2023/‎9/‎14 15:11] chendakeng (CTPL): 
在集群数据通道接口（覆盖FCU）、集群控制通道接口（覆盖CCU）down的时候增加个日志输出，日志内容能看出是新增的即可。 
哥维护组要我做个补丁实现上面的功能，集群数据通道接口（覆盖FCU）、集群控制通道接口（覆盖CCU） 这两个口的相关代码去哪里看啊，这块真没看过
fcu是不是就是sfua啊？
[‎2023/‎9/‎14 15:12] dengshien (CTPL): 
fcu的版本就是sfu
这个可以让王雅丽找个位置加一下
[‎2023/‎9/‎14 15:13] dengshien (CTPL): 
控制通道drv_ccrp_LinkCallBack 在这个函数里面随便加点输出
ccu的
[‎2023/‎9/‎14 15:14] chendakeng (CTPL): 
哦好的

DRV_EKDM_BoaOiuPortStatusChange
DRV_DBG_PRINT(IC_LEVEL_ERR, "\n Patch: FCU %u port %u subport down.", ucPort, ucSubPort);

DRV_CCRP_Debug("Patch:CCU port %d is %s\n", uiPort, (DRV_XGS_LINK_DOWN == uiStatus) ? "down" : "up");

dis hard int sw logbuffer

SYSM_Log(pstPowerCb->hInstance, (ULONG)LOG_NOTICE, "POWER", "Patch: power show info.\n");

641571

在第三季度期间我主要工作内容是cmdline动态修改特性、rx8800包装项目、mcelog问题处理、71sp补丁验证、集群光模块命令适配和处理各分支问题单等。

cmdline动态修改特性：cmdline指的是Linux内核启动参数，是一条字符串，通常被用来传递配置信息给内核。作为linux内核的公共特性，网上的资料不少，再开始编写该特性前我了解有关cmdline的知识，做足功课和准备。动态修改cmdline特性背后的逻辑并不复杂，就是将需要修改的cmdline参数以字符串形式保存下来。在单板启动时通过gdsync的方式从主控获取数据，
Bootware将gdsync数据放在内存的特殊位置，并将地址以”gdsync=0xaddr”的形式记录在cmdline中传递给loader，驱动的工作就是在loader中解析出该地址，获取到gdsync数据中的内核启动参数配置，将这段字符串与bootware传递过来的cmdline和loader中产品定制的参数重新组合生成一段新的cmdline，最后再传递给内核，从而实现不换版本动态修改内核参数。工作的大部分时间是与om进行联调、配合，与om部门的同事协商好数据的存取方式来更新bootware版本。该特性支持目前大部分的单板，修改适配的bootware达到11个，并且主控、线卡以及mcpa之间的实现方式各有不同，整个开发流程并没有一帆风顺。在和om部门同事经过将近一个月的调试后，终于将大部分单板都适配成功。通过完成这个特性得开发，不仅可以帮助同事在需要频繁修改cmdline参数的场景下提高工作效率，也加深了我对linux内核基础特性的理解，增加了我的工程经验以及对外交流配合的经验，是一次不可多得的宝贵经历

rx8800包装项目：包装项目是一个紧急项目，刚接手时一头雾水，以为只是修改单板的显示名称。后面在深入了解整个流程之后，才发现包装项目的难点所在。整个项目涉及的代码量并不大，但是修改点较为零散，从DRV到PUBLIC，从编译代码到打包全新的ipe文件。整个过程需要了解从ipe解包，到bootware识别ipe包头中的编码，再到启动过程中通过oem信息如何修正oid，设备名等基础信息的流程。通过这个包装项目我了解bom码，oid，oem等信息的概念，了解了它们在产品中发挥的作用，加深我对cr产品的认识以及该项目中所涉及的代码模块的理解。

mcelog问题处理和集群光模块命令适配：本季度的工作还包括mcelog问题的处理和集群光模块命令适配，mce问题方面我除了帮助翻译存储在单板上的mcelog原始数据，还积极联系intel公司的fae协助定位处理mce问题。

除了以上的本职工作外，还多次通过远程桌面的方式帮助硬件部门的同事解决定位问题，根据维护组同事的需要协助71sp的补丁验证工作，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第三季度的工作目标，对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。

-------------第四季度---------------
1、移动nps单板显示实时功率，电流
2、【CR B75D071移动分支】【TB202208100001】【FAN】1920机框风扇进行mib读取，发现风扇模式，风扇转速比与dis fan查看到的信息不一致
3、mcelog解析友好显示
4、rst-nmi功能

[‎2023/‎10/‎10 10:02] gaojinlong (CR-DRV, CTPL): 
在么
PN:202207121155 202205111335 202207121169
Problem:【CR B75D071SP维护分支】【驱动支撑】增加功能，支持命令行显示kque/fifo/dmesg
ProjectID:NV202208020014  
这三个单子向同步分支merge下，稍后让houjing同步问题单。
[‎2023/‎10/‎10 10:05] chendakeng (CTPL): 
啊同步哪个分支
[‎2023/‎10/‎10 10:05] gaojinlong (CR-DRV, CTPL): 
移动分支
http://10.153.120.117/cr_code/drv/V7R1_B75D071SP/branches_bugfix/COMWAREV700R001B75D071SP0420220810/TB202208100001/DRV 
[‎2023/‎10/‎10 10:13] chendakeng (CTPL): 
202205111335 202207121169 这两个移动分支合过了
202207121155  这个没合
[‎2023/‎10/‎10 10:15] gaojinlong (CR-DRV, CTPL): 
这个合一下吧，我这有一个单子依赖这个修改
[‎2023/‎10/‎10 10:16] chendakeng (CTPL): 
好的


[‎2023/‎10/‎16 15:29] zouyannan (CTPL): 
2023/10/16 15:18:23:039.791 MDC=1 NODE=fcc1/14/0 CPU=01 power POWER/5/POWER: Power 19 state is 2.                                   
2023/10/16 15:18:23:039.823 MDC=1 NODE=fcc1/14/0 CPU=01 power POWER/5/POWER: Power 19 state change to err.                          
2023/10/16 15:18:23:069.999 MDC=1 NODE=fcc1/14/0 CPU=01 power POWER/5/POWER: Power 19 check is selferr true. 
[‎2023/‎10/‎16 16:01] zouyannan (CTPL): 
#86 2023/10/16 15:55:10 -MDC=1 -MID=0x0f0c0001 :                                                                                    
%2023/10/16 15:55:10:711.849 MDC=1 NODE=fcc1/14/0 CPU=01 power LOG/3/DEVM: Power18 plugout wrongly by peer-check! 
[‎2023/‎10/‎16 16:17] zouyannan (CTPL): 
2023/10/16 16:08:13:057.839 MDC=1 NODE=fcc1/14/0 CPU=01 power DEVM-CHECK/6/DEVM-CHECK: Type1 for index18 send value(0),result is 0x0
 in 30ms                                                                                                                            
2023/10/16 16:08:13:188.279 MDC=1 NODE=fcc1/14/0 CPU=19 ipc-devm-c0 DEVM-CHECK/6/DEVM-CHECK: Type1 for index18 received value(0), ch
eck-result is 1  
[‎2023/‎10/‎16 17:49] zouyannan (CTPL): 
2023/10/16 17:43:28:915.294 MDC=1 NODE=fcc1/13/0 CPU=01 power POWER/5/POWER: Power 19 type NA pwrm 0                                
2023/10/16 17:43:28:915.365 MDC=1 NODE=fcc1/13/0 CPU=01 power POWER/5/PowerOk: Power 19 Ok                                          
2023/10/16 17:43:29:916.938 MDC=1 NODE=fcc1/13/0 CPU=01 power POWER/5/POWER: Power 19 state is 2.                                   
2023/10/16 17:43:29:916.965 MDC=1 NODE=fcc1/13/0 CPU=01 power POWER/5/POWER: Power 19 state change to err.                          
2023/10/16 17:43:31:055.917 MDC=1 NODE=fcc1/13/0 CPU=01 power POWER/5/POWER: Power 19 Id UNKNOWN-POWER, try 6 time(s).   


[‎2023/‎10/‎27 16:15] zengchengkun (CTPL): 
[‎2023/‎10/‎27 14:55] zengchengkun (CTPL): 
[‎2023/‎10/‎27 14:53] zengchengkun (CTPL): 
20D上NMI信号上送后是放在扣板CPLD 0X2108寄存器吗？
[‎2023/‎10/‎27 14:54] yangru (CTPL): 
是之前的NMI，还是新增的按键NMI
[‎2023/‎10/‎27 14:54] zengchengkun (CTPL): 
新增的，按住20s后触发
[‎2023/‎10/‎27 14:55] yangru (CTPL): 
没有放寄存器。直接加了mask，与之前的与了，然后给CPU 
只有底板寄存器做了标志位，扣板那个寄存器实际没用 


# prdump --echo wdt help 有帮助，用loop命令指定一个cpu死循环就行
find /dfs/slot2/tmp/sda3/blackbox/ -type f -exec cat {} \; 2> /dev/null 



---------------------------------------------2024--------------------------------------------------

-------------第一季度---------------

1、dm4.0插件适配

https://idoc.h3c.com/sheets/RKAWVRB0jrCXxdk8/MODOC // dm4.0
http://h3chz24-svn/PON-CODE/CM/branches_bugfix/NV202311160013 //芯河代码路径
https://idoc.h3c.com/sheets/Wr3DVzLb4WtDK2kJ/Tt0CX //任务文档路径
2、onu可维护特性实现

PON-DOC - Revision 2364: /软件项目文件夹/02.ONU组/10.特性文件夹/H3C S7500E V700R16B13 移动FTTR DM插件特性项目

在第一季度期间我主要工作内容是dm4.0插件适配和onu可维护特性开发。
dm4.0插件适配：这项工作是我在来到新部门后的第一项工作，该特性开发涉及linux用户态开发，模块sdk适配，相关网络协议适配等，与之前在内核态开发产品驱动代码的工作内容相差较大，是一个比较大的挑战。
在基于dm2.0开发的基础上，根据移动提供的适配文档，并且在查阅许多协议相关的内容后在规定时间内顺利完成插件适配开发，通过特性验收。通过完成dm4.0插件适配这项工作，还让我开始初步了解学习pon的相关业务知识，
适应新部门的工作内容和模式。

onu可维护特性：onu可维护特性的开发是为了增加onu出问题后的可维护手段，方便快速定位问题。根据网上问题定位总结出几个需要增加的可维护手段，异常重启记录，cpu历史使用率，协议报文统计等关键信息。
在该项工作中我根据其他同学的需求分析实现转化为实际代码并验证功能。

除了以上的本职工作外，还多次通过远程桌面的方式帮助测试部门的同事解决定位问题，根据维护组同事的需求完成增加可维护功能，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第一季度的工作目标，
对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。
-------------第二季度---------------
http://h3chz24-svn/PON-CODE/CM2/branches_bugfix/HL202MV100R001B08D001                  从网关
http://h3chz24-svn/PON-CODE/CM2/branches_bugfix/HM2004DMV100R001B08D001          主网关 
移动FTTR 代码路径

\\10.99.213.71\l28833\FTTR\插件参考-jianbo\移动入库测试 2023\入库测试插件 

aosnet适配
egt908h适配 ddr\flash\语音\bosa
/home/l29364/1_code/1_PON_CODE/et908_trunk_908h_test1/trunk  
202401171700

voip/
|-- bin
|   |-- mgapp
|   |-- sipclient
|   |-- tcVoIPApiServer
|-- eva
|   |-- bin
|   |   |-- evcom
|   |   |-- evcoms
|   |   |-- libadam.a
|   |   |-- libadam.so
|   |   |-- libslic_ctrl.a
|   |   |-- libslic_ctrl.so
|   |   |-- slic_ctrl_test
|   |   |-- voip_loader

 
在第二季度期间我主要工作内容是aos插件适配和egt908h款sfu适配。
AOS插件适配：在移动FTTR开发过程中，AOS插件的适配是一项重要工作。根据移动公司提供的适配文档和闭源文件，
我负责在PON组网中进行该插件的适配。主要工作是编写Makefile。起初，我对Makefile的相关知识并不熟悉，但通过深入学习和研究，
我及时完成了AOS插件的适配任务。在这一过程中，我不仅掌握了Makefile的编写技巧，还初步了解了PON组网以及相关业务的基础知识。
通过这个项目，我进一步提升了自学能力和问题解决能力，并成功适应了新部门的工作模式和要求。最终，我顺利完成了AOS插件的适配工作，
为项目的顺利推进做出了贡献。

EGT908H款SFU适配：在项目中，我负责将HUG分支移植到SFU分支，这是一项紧急任务，要求按时满足暑期发货。
由于对镁光的制裁，我们需要适配新的DDR和Flash芯片，同时移植语音内核模块。在这一过程中，我深度理解了系统的代码架构和编译架构，
从而能够有效地进行代码调整和模块优化。通过高效的技术学习和应用，我最终成功实现了版本的正常启动。在版本启动之后，
我继续协助同事完成BOSA驱动的适配工作。从完全不了解到成功完成适配，我仅用了一个星期的时间。这次任务让我不仅提升了适应能力和技术执行力，
也展示了我在高压情况下的解决问题能力和团队协作精神。这其中，深入理解系统架构和编译流程是关键因素，确保了项目的顺利进行并及时发货。

除了以上的本职工作外，还多次通过远程桌面的方式帮助测试部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第一季度的工作目标，
对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。

-------------第三季度---------------
1、网络引导版本启动
2、归一化分析
3、 FTTR改版联调（USXGMII 5G）
4、cli适配
5、Fttr入库问题单处理
6、xgpon sfu 遗留问题解决

在第二季度期间我主要工作内容是aos插件适配和egt908h款sfu适配。
AOS插件适配：在移动FTTR开发过程中，AOS插件的适配是一项重要工作。根据移动公司提供的适配文档和闭源文件，
我负责在PON组网中进行该插件的适配。主要工作是编写Makefile。起初，我对Makefile的相关知识并不熟悉，但通过深入学习和研究，
我及时完成了AOS插件的适配任务。在这一过程中，我不仅掌握了Makefile的编写技巧，还初步了解了PON组网以及相关业务的基础知识。
通过这个项目，我进一步提升了自学能力和问题解决能力，并成功适应了新部门的工作模式和要求。最终，我顺利完成了AOS插件的适配工作，
为项目的顺利推进做出了贡献。

EGT908H款SFU适配：在项目中，我负责将HUG分支移植到SFU分支，这是一项紧急任务，要求按时满足暑期发货。
由于对镁光的制裁，我们需要适配新的DDR和Flash芯片，同时移植语音内核模块。在这一过程中，我深度理解了系统的代码架构和编译架构，
从而能够有效地进行代码调整和模块优化。通过高效的技术学习和应用，我最终成功实现了版本的正常启动。在版本启动之后，
我继续协助同事完成BOSA驱动的适配工作。从完全不了解到成功完成适配，我仅用了一个星期的时间。这次任务让我不仅提升了适应能力和技术执行力，
也展示了我在高压情况下的解决问题能力和团队协作精神。这其中，深入理解系统架构和编译流程是关键因素，确保了项目的顺利进行并及时发货。

除了以上的本职工作外，还多次通过远程桌面的方式帮助测试部门的同事解决定位问题，提升自己的团队协作能力。总而言之，在个人的努力和同事的帮助下完成了第一季度的工作目标，
对业务流程逐渐熟悉，业务水平稳步提升。在即将到来的下一季度工作中，我将继续保持积极认真的工作势头，更加出色的完成各项工作任务。

第三季度工作总结
在第二季度取得的成果基础上，我在第三季度继续深入推动各项工作，主攻方向包括网络引导版本启动、移动FTTR入库测试配合、联通FTTR改
版联调、以及解决XGPON SFU遗留问题等。以下是对每项工作的详细总结：
1. 网络引导版本启动
在第三季度，我完成了网络引导版本的启动特性的开发。在该项目中，需要分析uboot源码并结合sdk正常加载镜像的流程，基于uboot的tftpboot特性实现网络
引导版本加载的功能。通过对引导流程的深入分析和优化实现流程，加深了我对uboot源码和嵌入式引导加载镜像机制的理解，该特性优化了版本升级流程极大的
方便了开发同学在调试过程中频繁更换版本的操作。
2. 移动FTTR入库测试配合
紧急配合移动FTTR入库测试项目，及时解决入库测试中暴露的问题，顺利完成移动的入库测试达到移动的入库标准。
3. FTTR改版联调
在联通FTTR改版联调中，我负责改版硬件的软件适配工作。此项任务需要对新的硬件版本进行详细的验证和测试，确保版本的可用性和兼容性。
我通过协调硬件团队，解决了联调中发现的关键问题。在一周时间内调通改版设备的同时完成软件对老版本的兼容性开发，在极短的时间内捋清了硬件改版对应
软件的修改点，及时完成代码适配在规定时间节点对外发布可用版本使得项目节点顺利下行。
4. XGPON SFU遗留问题解决
解决XGPON SFU项目中遗留问题，通过配合测试复现问题，根据日志信息结合代码定位问题的原因，成功解决了模块上的多个技术难点，提升了系统的稳定性。
总结与展望
这一季度里，通过各项工作的顺利完成，我在技术执行力和团队协作能力方面得到了进一步的提升。每项任务的完成不仅增强了我对领域知识的理解，
还提高了问题分析和解决的能力。在接下来的工作中，我将继续秉持积极进取的态度，致力于完成更具挑战性的任务，为公司的发展贡献更多力量。


echo port st >/proc/h3c_debug
关键事迹
在转入新部门仅半年的时间内，在人力紧张、对PON产品还不完全熟悉的情况下，积极参与并推动EGT908H语音裁剪款项目的开发。在项目过程中，遇到适配国产DDR/Flash芯片的技术难题，以及临时适配BOSA驱动的需求，依然全力以赴，最终确保了暑期产品能够按时发货。

领航者文化的体现
用心工作，以结果为导向
面对项目中的多重挑战，展现了领航者文化中用心工作、以结果为导向的精神。即使对PON产品不熟悉，依然积极学习并快速上手，通过制定详细且可行的目标，并严格遵守每个时间节点，确保项目顺利推进。
坚持不懈，有始有终
在适配国产DDR/Flash芯片以及临时适配BOSA驱动的问题上，表现出了坚持不懈、有始有终的态度。面对复杂的技术难题，他通过不断实验和优化方案，终于成功解决了问题，展现了迎难而上的坚毅精神。
专业严谨，高效工作
深入专研项目所需的各项技术，迅速提升了个人的业务能力。以专业严谨的态度面对每一个细节，确保了工作质量和效率。这种精神不仅加速了项目的进展，也提高了产品的整体质量和市场竞争力。
全心投入与主人翁精神
全心全意地投入到工作中，以主人翁的精神对待每一个项目任务。在高强度的工作环境下，始终保持积极的态度和高度的责任感，制定合理的计划，并通过精心的管理和细致的执行，确保了项目按时完成。

总结
在EGT908H语音裁剪款项目的开发过程中，充分体现了多项领航者文化的核心价值、不仅反映了自身的卓越能力和工作精神，也为团队树立了良好的榜样。通过自身的不懈努力，不仅顺利完成了项目目标，还为公司的长期发展和市场竞争力做出了积极贡献。
我的工作表现证明了领航者文化的强大生命力和实际效果，在未来的工作中，我将继续发扬这种精神，迎接更多的挑战和机遇，推动公司不断迈向新的高度。


-------------第四季度---------------
1、an9510合一化工作 ----- 
提单时公共信息字段的基线版本填：ONU V100R003B04D001  
2、 XGPON SFU遗留问题解决

xsgmii接口相关实现  ----------- 1k                      
xpon基础功能10gphy驱动-------- 1k
xpon基础功能1gphy驱动--------- 0.1k
7581switch芯片phy基础功能 ------- 0.3k
7583switch芯片内部寄存器读写接口 ------- 1k
7583switch芯片内部MII接口实现----------- 1k
7583switch芯片pbus总线读写实现---------- 1k
7583switch芯片端口状态查询功能 ---------- 0.3k
7583switch芯片速率协商功能实现----------- 1k
7583switch芯片对外api接口实现 ------------ 1k
7583switch芯片初始化配置相关--------------1k
7583switch芯片环路功能相关-----------------0.5k
7583switch芯片mdio读写接口实现-----------0.5k
7583switch芯片注册相关-------------------- 0.7

an8811phy芯片驱动实现  ----------- 0.3k
第四季度工作总结
在第三季度取得的成果基础上，我在第四季度继续深入推动各项工作，主要工作包括an9510合一化工作、解决XGPON SFU遗留问题和指导新员工完成
isoft项目流程等。以下是对每项工作的详细总结：
1. an9510合一化工作
9510项目是mtk基于新一代控制芯片提供了全新的sdk，下一代的onu将基于该芯片进行开发。为了兼容7581老芯片，方便代码管理需要将新的sdk和7581
的sdk合并成一个sdk进行管理。这项工作涉及整个sdk所有模块的代码，任务紧且工作量大，我负责的模块主要是底层代码，涉及代码量约为10k左右，
经过半个月的努力不仅顺利完成新旧sdk代码的兼容工作，所负责的模块编译成功还掌握相关模块的工作原理，为后续的开发工作打下坚实的基础。
2. XGPON SFU遗留问题解决
解决XGPON SFU项目中遗留问题是一项艰巨的任务，问题内容涉及多个模块且不少为难复现问题，且复现问题环境多种多样，由其还面临人力投入不足和
关系到年度版本发布的时间紧迫的情况。通过配合测试复现问题，根据日志信息并结合代码定位问题的原因，成功解决了一个个疑难问题不断收敛遗留问题单的数量。
总结与展望
这一季度里，通过各项工作的顺利完成，我在技术执行力和团队协作能力方面得到了进一步的提升。每项任务的完成不仅增强了我对领域知识的理解，
还提高了问题分析和解决的能力。在接下来的工作中，我将继续秉持积极进取的态度，致力于完成更具挑战性的任务，为公司的发展贡献更多力量。
hi，这个单子我用最新版本测复现概率不大我先走单了哈。
回归的时候要注意一下
1、如果很容易复现可能是电源供电问题，用一个输出为1A的电源，插排供电要稳定，我之前复现就是供电原因7、8次就出现一次
2、解决供电问题后，如果shutdown/undo shutdown周期在4秒左右，有可能平均半小时出现一次重启，这可能是模式切换导致的，undo shutdown的时候有下行光，但是这个时候onu的phy还是down的，
onu有一个gpon和epon切换的功能一般是一分钟检查一次，有下行光刚好phy又是down的情况可能触发模式切换重启，这个后面会自行恢复，这个我们讨论了不是问题；周期如果放长点8秒左右，一般很难出现

onu xepon光模块 zouxin
       xgspon光模块 llk

olt xgspon 光模块 gujunhao924hr上自带



Reading symbols from /userfs/bin/omci_v2...done.
[2024/12/23 10:50:25] (gdb) inf   core-file core-omci_v2.635.41 
[2024/12/23 10:50:34] warning: exec file is newer than core file.
[2024/12/23 10:50:34] [New LWP 635]
[2024/12/23 10:50:34] [New LWP 647]
[2024/12/23 10:50:34] [New LWP 1235]
[2024/12/23 10:50:34] [New LWP 1236]
[2024/12/23 10:50:34] [New LWP 1237]
[2024/12/23 10:50:34] [New LWP 1238]
[2024/12/23 10:50:34] [New LWP 1234]
[2024/12/23 10:50:34] [Thread debugging using libthread_db enabled]
[2024/12/23 10:50:34] Using host libthread_db library "/lib/libthread_db.so.1".
[2024/12/23 10:50:34] Core was generated by `/userfs/bin/omci_v2'.
[2024/12/23 10:50:34] Program terminated with signal SIGSEGV, Segmentation fault.
[2024/12/23 10:50:34] #0  0x77c840b4 in free () from /lib/libc.so.0
[2024/12/23 10:50:34] (gdb) bt
[2024/12/23 10:54:26] #0  0x77c840b4 in free () from /lib/libc.so.0
[2024/12/23 10:54:26] #1  0x77c57988 in fclose () from /lib/libc.so.0
[2024/12/23 10:54:26] #2  0x00416418 in omcidbgPrintf (debugLevel=1 '\001', 
[2024/12/23 10:54:26]     fmt=0x4bbc50 "\r\n finished init process!\r\n") at omci_utily.c:292
[2024/12/23 10:54:27] #3  0x0040bef4 in main (argc=1, argv=0x7fb81d34) at omci.c:7241

(gdb) core-file core-omci_v2.635.41 
[2024/12/23 15:51:08] warning: exec file is newer than core file.
[2024/12/23 15:51:08] [New LWP 1213]
[2024/12/23 15:51:08] [New LWP 647]
[2024/12/23 15:51:08] [New LWP 1215]
[2024/12/23 15:51:08] [New LWP 1214]
[2024/12/23 15:51:08] [New LWP 1212]
[2024/12/23 15:51:08] [New LWP 635]
[2024/12/23 15:51:08] [Thread debugging using libthread_db enabled]
[2024/12/23 15:51:08] Using host libthread_db library "/lib/libthread_db.so.1".
[2024/12/23 15:51:08] Core was generated by `/userfs/bin/omci_v2'.
[2024/12/23 15:51:08] Program terminated with signal SIGSEGV, Segmentation fault.
[2024/12/23 15:51:08] #0  0x779e1c54 in memset () from /lib/libc.so.0
[2024/12/23 15:51:08] (gdb) bt
[2024/12/23 15:51:14] #0  0x779e1c54 in memset () from /lib/libc.so.0
[2024/12/23 15:51:14] #1  0x0040d050 in omciRxPktTask () at omci.c:9757
[2024/12/23 15:51:14] #2  0x77cd30a4 in start_thread () from /lib/libpthread.so.0
[2024/12/23 15:51:14] #3  0x77cc9010 in __thread_start () from /lib/libpthread.so.0
[2024/12/23 15:51:14] Backtrace stopped: frame did not save the PC

(gdb) core-file core-omci_v2.635.41 
[2024/12/24 18:37:55] warning: core file may not match specified executable file.
[2024/12/24 18:37:55] [New LWP 635]
[2024/12/24 18:37:55] [New LWP 647]
[2024/12/24 18:37:55] [New LWP 1225]
[2024/12/24 18:37:55] [New LWP 1226]
[2024/12/24 18:37:55] [New LWP 1227]
[2024/12/24 18:37:55] [New LWP 1228]
[2024/12/24 18:37:55] [New LWP 1224]
[2024/12/24 18:37:55] [Thread debugging using libthread_db enabled]
[2024/12/24 18:37:55] Using host libthread_db library "/lib/libthread_db.so.1".
[2024/12/24 18:37:55] Core was generated by `/userfs/bin/omci_v2'.
[2024/12/24 18:37:55] Program terminated with signal SIGSEGV, Segmentation fault.
[2024/12/24 18:37:55] #0  0x7715e0b4 in free () from /lib/libc.so.0
[2024/12/24 18:37:55] (gdb) bt
[2024/12/24 18:38:10] #0  0x7715e0b4 in free () from /lib/libc.so.0
[2024/12/24 18:38:10] #1  0x7713472c in _stdio_fopen () from /lib/libc.so.0
[2024/12/24 18:38:10] #2  0x77340a74 in get_itf_dbg_level () from /lib/libecnt_lib_dbg.so.1
[2024/12/24 18:38:10] #3  0x77340b40 in get_itf_dbg_switch () from /lib/libecnt_lib_dbg.so.1
[2024/12/24 18:38:10] warning: GDB can't find the start of the function at 0x7735a12a.
[2024/12/24 18:38:10] #4  0x7735a12c in ?? () from /lib/libapi_lib_ponmgr_v2.so.1



---------------------------------------------2025--------------------------------------------------

-------------第一季度---------------
1、7581sfu项目问题单处理
2、dts配置功能开发
3、适配外置看门狗工作
4、7580sfu遗留问题清理


pure_initcall：最早期初始化。
core_initcall：核心子系统初始化。
postcore_initcall：核心子系统之后的初始化。
arch_initcall：架构相关初始化（GPIO_WATCHDOG_ARCH_INITCALL 位于此阶段）。
subsys_initcall：子系统初始化。
fs_initcall：文件系统初始化。
device_initcall：设备驱动初始化。
late_initcall：最后阶段初始化。

[watchdog]:外置看门狗适配
PN:特性开发 
ProjectID:NV202412110012


[login]:解决插拔网口之后telnet登录不上
PN:202503050545
ProjectID:

[telnet]:解决telnet过一段时间后连不上的问题
PN:202503100794
ProjectID:

[telnet]:解决uni侧ipv6管理地址不支持telnet
PN:202503191334
ProjectID:NV202412110012


[lan]:解决ONU的四个uni口的序号问题
PN:202503191181
ProjectID:NV202412110012


[cli]:解决ONU登录界面问题
PN:202503201651
ProjectID:NV202412110012


[reset]:解决reset按键相关问题
PN:202503100961
ProjectID:NV202412110012

[boot]:解决EGT308引导问题
PN:202504081296
ProjectID:

2025第一季度聚焦代码优化与问题攻坚，主要完成以下任务：
1、7581 SFU项目问题单处理
主导处理多个疑难关键问题单，涵盖telnet、用户登录等场景，通过日志分析与代码调试实现95%问题闭环，保障版本按期发布。
2、DTS配置功能开发
完成动态DTS配置模块开发，支持多种硬件型号灵活适配，方便后续开发人员调用相关接口进行开发工作。
3、适配看门狗功能
4、实现硬件看门狗驱动与系统级复位逻辑，优化异常检测机制，设备稳定性提升40%，复位成功率达100%。
7580 SFU遗留疑难问题清理
清理多个历史疑难问题，包括升级失败、进程间通信，olt下发命令不生效等，修复内存泄漏与硬件参数配置错误，问题单清零率100%。
总结与展望
这一季度里，通过各项工作的顺利完成，我在技术执行力和团队协作能力方面得到了进一步的提升。每项任务的完成不仅增强了我对领域知识的理解，
还提高了问题分析和解决的能力。在接下来的工作中，我将继续秉持积极进取的态度，致力于完成更具挑战性的任务，为公司的发展贡献更多力量。

[version]:解决EGT358/PA版本适配问题
PN:202504111342
ProjectID:
-------------第二季度---------------

1、问题单处理
2、适配egt358/pa款型
3、308调试

[cli]:解决onu型号显示问题
PN:202503240582
ProjectID:NV202412110012但是

[uni]:解决904 uni1口shutdown不了问题
PN:202503110569
ProjectID:NV202412110012

[version]:EGT308-H-T7W更改名称为EGT308-T7W
PN:202504110368
ProjectID:NV202412110012

[dts]:增加新增款型dts节点配置
PN:202504241036
ProjectID:NV202412110012

[pon_phy]:patch解决EGT308HT7W单板注册问题
PN:202504250710
ProjectID:NV202412110012

09:09 - 18:30
08:54 - 19:58
08:47 - 18:19
08:53 - 18:15


08:59 - 19:17
09:03 - 18:28
09:01 - 18:46
09:02 - 19:12
09:02 - 20:56


bosa: cb012002优特  1g对称 上行1310nm 下行1490nm

sys memwl 1faf093c 0


[usb]:解决usb灯不亮的问题
PN:202504230696
ProjectID:NV202412110012

[led]:解决3.0wifi6主网关电源指示灯亮灯慢
PN:202504230637
ProjectID:

[button]:解决主网关设备按复位按键3-5s无法进行复位
PN:202504221003
ProjectID:

[wdt]:适配905HPD外置看门狗
PN:202504250710
ProjectID:NV202412110012

14
08:57 - 18:54
09:04 - 21:36
09:06 - 22:01
09:06 - 19:22
09:06 - 18:24

21
09:08 - 20:54
09:05 - 19:27
09:05 - 19:55
09:07 - 21:36
08:56 - 18:23

27
09:04 - 18:56
09:02 - 18:52
08:53 - 20:02
年休假（00:00-00:00）

6
08:57 - 19:28
09:03 - 18:36
08:54 - 18:41
08:59 - 19:39
[led]:解决网关电源指示灯亮灯时间长
PN:202504271662
ProjectID:

[led]:解决905\910电源指示灯亮灯慢的问题
PN:202505131783
ProjectID:NV202412110012



button: reset, event: released, time: 3
====>[debug]check_reset_button(): 401 sec:3
====>[debug]check_reset_button(): 514 reset with current conf
ONU is ready to upgrade! vvvv
before do griffin EINT_RESETB gpio toggle
begin do griffin EINT_RESETB 

                                                                                                                                                    
button: reset, event: released, time: 12                                                                                                            
====>[debug]check_reset_button(): 401 sec:12                                                                                                        
====>[debug]check_reset_button(): 463 reset with default conf                                                                                       
UBIFS error (ubi0:0 pid 1537): ubifs_unpack_nnode: invalid type (15) in LPT node type 1 

[led]:解决从网关指示灯按钮按下会出现按下熄灭后自动亮情况
PN:202504170445
ProjectID:  

[led]:解决EGT904设备起来后 出现不接光纤， EPON模式下PON 灯状态黄灯闪烁，非红灯闪烁
PN:202505190710
ProjectID:NV202412110012


[led]:解决主网关下挂从网关，待从网关正常注册上，主网关下联光指示灯不亮
PN:202504221905
ProjectID:

[led]:解决EL201P-S一键开关灯问题
PN:
ProjectID:

[led]:解决EL201C-S设备启动过程中PON灯启动过程中灯不亮；设备上电完成但未收到光灯不闪烁--同步
PN:202504180275
ProjectID:

[button]:解决开启按键模式不生效问题--同步
PN:202506061233
ProjectID:NV202412110012